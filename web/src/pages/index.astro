---
import Accordion from 'components/Accordion.astro';
import AccordionItem from 'components/AccordionItem.astro';
import Link from 'components/Link.astro';
import Layout from 'layouts/Layout.astro';
import { getPages } from 'lib/sanity';

const pages = await getPages();
---

<Layout>
  <Accordion>
    <AccordionItem header="First item">
      <p>Paragraph</p>
      <Link href="/">Link</Link>
    </AccordionItem>
    <AccordionItem header="Second item">
      <p>Paragraph</p>
      <Link href="/">Link</Link>
    </AccordionItem>
    <AccordionItem header="Color palette">
      <h4>Click to change background color</h4>
      <div class="color-palette">
        <button class="yellow"></button>
        <button class="dark"></button>
        <button class="purple"></button>
        <button class="orange"></button>
      </div>
    </AccordionItem>
  </Accordion>
  <ul>
    {
      pages?.map(({ title, slug }) => (
        <li>
          <Link href={`/${slug.current}`}>{title}</Link>
        </li>
      ))
    }
  </ul>
</Layout>

<style lang="scss">
  .color-palette {
    display: grid;
    grid-template-columns: 1fr 1fr;
    gap: 1rem;

    @media (min-width: 768px) {
      grid-template-columns: 1fr 1fr 1fr 1fr;
    }
  }

  .color-palette > button {
    aspect-ratio: 1;
    border: 1px solid var(--white);
    cursor: pointer;
  }

  h4 {
    margin-bottom: 1rem;
  }

  .yellow {
    background-color: var(--kodio-yellow);
  }

  .dark {
    background-color: var(--kodio-dark);
  }

  .purple {
    background-color: var(--kodio-purple);
  }

  .orange {
    background-color: var(--kodio-orange);
  }
</style>
<script>
  const yellowButton = document.querySelector<HTMLButtonElement>('button.yellow');
  const darkButton = document.querySelector<HTMLButtonElement>('button.dark');
  const purpleButton = document.querySelector<HTMLButtonElement>('button.purple');
  const orangeButton = document.querySelector<HTMLButtonElement>('button.orange');

  yellowButton?.addEventListener('click', () => {
    document.body.style.backgroundColor = 'var(--kodio-yellow)';
    document.body.style.color = '';
  });

  darkButton?.addEventListener('click', () => {
    document.body.style.backgroundColor = 'var(--kodio-dark)';
    document.body.style.color = 'var(--white)';
  });

  purpleButton?.addEventListener('click', () => {
    document.body.style.backgroundColor = 'var(--kodio-purple)';
    document.body.style.color = '';
  });

  orangeButton?.addEventListener('click', () => {
    document.body.style.backgroundColor = 'var(--kodio-orange)';
    document.body.style.color = '';
  });
</script>
