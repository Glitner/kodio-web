---
import { PortableText } from 'astro-portabletext';
import SectionLayout from '@layouts/SectionLayout.astro';
import AccordionBlock from './blocks/AccordionBlock.astro';
import ArticleBlock from './blocks/ArticleBlock.astro';
import BannerBlock from './blocks/BannerBlock.astro';
import BannerLinkGroupBlock from './blocks/BannerLinkGroupBlock.astro';
import type { Section } from '@lib/sanity';

export interface Props {
  sections?: Section[] | undefined;
}

const { sections } = Astro.props;
---

{
  sections?.map((section) => (
    <SectionLayout color={section.color} heading={section.heading}>
      <PortableText
        value={section.content ?? []}
        components={{
          type: {
            accordion: AccordionBlock,
            article: ArticleBlock,
            banner: BannerBlock,
            bannerLinkGroup: BannerLinkGroupBlock,
          },
        }}
      />
    </SectionLayout>
  ))
}
